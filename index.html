<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Portuguese SEO -->
    <meta name="description" content="Amigatos da Milkinha - abrigo de gatos em Braga. 42 gatos à espera de um lar. Adopção, voluntariado, donativos.">
    <meta name="keywords" content="abrigo de gatos, adopção de gatos, Braga, Portugal, voluntariado, donativos, felinos">
    <meta property="og:title" content="Amigatos da Milkinha - Abrigo de Gatos">
    <meta property="og:description" content="Cada gato merece amor. 42 gatos procuram um lar para sempre.">
    <meta property="og:image" content="./assets/img/hero.png">
    <meta property="og:url" content="https://amigatosdamilkinha.pt">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="pt_PT">
    <title>Amigatos da Milkinha - Abrigo de Gatos</title>

    <link rel="icon" href="./logo.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="nav" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="./assets/img/logo.png" alt="Logo" class="logo-image">
                Amigatos da Milkinha
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Início</a></li>
                <li><a href="#sobre">Sobre</a></li>
                <li><a href="#servicos">Serviços</a></li>
                <li><a href="#contato">Contato</a></li>
            </ul>
            <ul class="nav-buttons">
                <li><a href="cats_grid.html" class="btn btn-primary nav-btn-wide">Ver Gatos</a></li>
                <li><a href="#ajudar" class="btn btn-secondary nav-btn-wide">Ajudar</a></li>
                <div class="language-switcher">
                    <a href="./en/index.html" class="language-btn" title="Switch to English">
                        <img src="./assets/img/language-circle.svg" alt="Language" class="language-icon">
                        <span class="language-text">EN</span>
                    </a>
                </div>
            </ul>

            <div class="mobile-menu" id="mobileMenu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>
    
    <section class="hero" id="inicio">
        <img src="./assets/img/hero.png" alt="Gatos do abrigo Amigatos da Milkinha" class="hero-bg-image" />
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Cada gato <br>merece amor</h1>
                <p class="hero-text">Criamos um ambiente seguro e acolhedor onde cada felino recebe cuidado, carinho e a
                    oportunidade de encontrar sua família para sempre.</p>
                <div class="hero-buttons">
                    <a href="tel:+351963260200" class="hero-phone">+351 963 260 200</a>
                    <a href="cats_grid.html" class="hero-cta">Ver Nossos Gatos</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats" id="stats">
        <div class="stats-container">
            <div class="stat-item fade-in">
                <img src="./assets/img/paw1.svg" alt="Paw" class="paw-svg">
                <div class="stat-content">
                    <span class="stat-number">42</span>
                    <span class="stat-label">Gatos Disponíveis</span>
                </div>
            </div>

            <div class="stat-item fade-in">
                <img src="./assets/img/paw1.svg" alt="Paw" class="paw-svg">
                <div class="stat-content">
                    <span class="stat-number">200+</span>
                    <span class="stat-label">Gatos Adotados</span>
                </div>
            </div>

            <div class="stat-item fade-in">
                <img src="./assets/img/paw1.svg" alt="Paw" class="paw-svg">
                <div class="stat-content">
                    <span class="stat-number">5</span>
                    <span class="stat-label">Anos de Experiência</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Cats Carousel Section -->
    <section class="cats-carousel">
        <div class="cats-carousel-container">
            <h2 class="fade-in">Conheça Alguns dos Nossos Amigatos</h2>
            <p class="fade-in">Cada um tem sua própria personalidade e história especial</p>

            <div class="carousel-wrapper fade-in">
                <div class="carousel-container">
                    <div class="carousel-track" id="carouselTrack">
                        <!-- Slide 1 -->
                        <div class="carousel-slide">
                            <div class="cat-preview-card">
                                <img src="./assets/img/Adolfina1.png" alt="Adolfina" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Adolfina</h3>
                                    <p>1 ano • Feminino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Baunilha.png" alt="Baunilha" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Baunilha</h3>
                                    <p>2 anos • Masculino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Brownie.png" alt="Brownie" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Brownie</h3>
                                    <p>2 anos • Masculino • Siamês</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                        </div>
                        <!-- Slide 2 -->
                        <div class="carousel-slide">
                            <div class="cat-preview-card">
                                <img src="./assets/img/Daisy.png" alt="Daisy" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Daisy</h3>
                                    <p>1 ano • Feminino • Pelo Longo</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Flash.jpg" alt="Flash" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Flash</h3>
                                    <p>3 anos • Masculino • Pelo Longo</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Gaio.jpg" alt="Gaio" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Gaio</h3>
                                    <p>2 anos • Masculino • Chartreux</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                        </div>
                        <!-- Slide 3 -->
                        <div class="carousel-slide">
                            <div class="cat-preview-card">
                                <img src="./assets/img/Gafanhoto.jpg" alt="Gafanhoto" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Gafanhoto</h3>
                                    <p>1 ano • Masculino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Harley Quinn.jpg" alt="Harley Quinn" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Harley Quinn</h3>
                                    <p>10 anos • Feminino • Calico</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Isa.jpg" alt="Isa" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Isa</h3>
                                    <p>10 meses • Feminino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                        </div>
                        <!-- Slide 4 -->
                        <div class="carousel-slide">
                            <div class="cat-preview-card">
                                <img src="./assets/img/Jubileu.jpg" alt="Jubileu" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Jubileu</h3>
                                    <p>5 anos • Masculino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Judy.jpg" alt="Judy" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Judy</h3>
                                    <p>10 anos • Feminino • Europeu Comum</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                            <div class="cat-preview-card">
                                <img src="./assets/img/Kika.jpg" alt="Kika" loading="lazy">
                                <div class="cat-preview-info">
                                    <h3>Kika</h3>
                                    <p>1 ano • Feminino • Pelo Longo</p>
                                    <span class="cat-preview-status">Disponível</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="carousel-btn carousel-btn-prev" id="prevBtn">❮</button>
                <button class="carousel-btn carousel-btn-next" id="nextBtn">❯</button>

                <div class="carousel-indicators" id="carouselIndicators"></div>
            </div>

            <div class="carousel-cta">
                <a href="cats_grid.html" class="btn btn-primary carousel-main-btn">
                    Ver Todos os Gatos
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="sobre">
        <div class="about-container">
            <div class="about-content fade-in">
                <h2>Nossa Missão</h2>
                <p>O Amigatos da Milkinha é mais do que um abrigo - é um lar temporário onde cada gato recebe amor,
                    cuidado médico e a chance de encontrar uma família para sempre.</p>
                <p>Trabalhamos incansavelmente para resgatar, reabilitar e realojar gatos abandonados,
                    proporcionando-lhes uma segunda oportunidade de vida feliz.</p>
                <p>Cada um dos nossos 42 gatos atuais tem sua própria história única e personalidade especial, esperando
                    pelo momento certo para encontrar sua família perfeita.</p>
            </div>
            <div class="about-image fade-in">
                <img src="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=600&h=400&fit=crop"
                    alt="Gatos do abrigo" loading="lazy">
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="servicos">
        <div class="services-container">
            <h2 class="fade-in">Como Você Pode Ajudar</h2>
            <div class="services-grid">
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">🏠</span> -->
                    <h3>Adoção</h3>
                    <p>Dê um lar permanente a um dos nossos gatos. Cada adoção salva duas vidas - a do gato adotado e
                        cria espaço para outro em necessidade.</p>
                </div>
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">❤️</span> -->
                    <h3>Doações</h3>
                    <p>Suas doações financeiras nos ajudam a cobrir custos veterinários, alimentação e cuidados diários
                        dos nossos amigos felinos.</p>
                </div>
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">🤝</span> -->
                    <h3>Voluntariado</h3>
                    <p>Junte-se à nossa equipe de voluntários dedicados. Ajude com limpeza, alimentação, socialização e
                        muito mais.</p>
                </div>
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">🎁</span> -->
                    <h3>Doação de Itens</h3>
                    <p>Precisamos de ração, areia sanitária, medicamentos, brinquedos e outros suprimentos para manter
                        nossos gatos felizes e saudáveis.</p>
                </div>
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">🏡</span> -->
                    <h3>Lar Temporário</h3>
                    <p>Torne-se uma família de acolhimento temporário para gatos que precisam de cuidados especiais ou
                        socialização extra.</p>
                </div>
                <div class="service-card fade-in">
                    <!-- <span class="service-icon">📢</span> -->
                    <h3>Divulgação</h3>
                    <p>Ajude-nos a divulgar nosso trabalho nas redes sociais e encontrar famílias para nossos gatos
                        especiais.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contato">
        <div class="contact-container">
            <h2 class="fade-in">Entre em Contato</h2>
            <p class="fade-in">Pronto para adotar ou tem dúvidas? Entre em contato conosco!</p>
            <div class="contact-info">
                <div class="contact-item fade-in">
                    <h3>📞 Telefone</h3>
                    <a href="tel:+351963260200">+351 963 260 200</a>
                </div>
                <div class="contact-item fade-in">
                    <h3>📧 Email</h3>
                    <a href="mailto:info@amigatosdamilkinha.pt">info@amigatosdamilkinha.pt</a>
                </div>
                <div class="contact-item fade-in">
                    <h3>🌐 Redes Sociais</h3>
                    <a href="https://linktr.ee/amigatosdamilkinha" target="_blank">Linktree</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">Amigatos da Milkinha</div>
            <p>Salvando vidas felinas, uma adoção de cada vez.</p>
            <div class="social-links">
                <a href="https://linktr.ee/amigatosdamilkinha" target="_blank" aria-label="Linktree">🔗</a>
                <a href="tel:+351963260200" aria-label="Telefone">📞</a>
                <a href="mailto:info@amigatosdamilkinha.pt" aria-label="Email">📧</a>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Amigatos da Milkinha. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- ================================================================ -->
    <!-- Fade in animation -->
    <script>
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observe all fade-in elements
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>

    <!-- Carousel-->
    <script>
        (function () {
            var currentSlide = 0;
            var carouselTrack = document.getElementById('carouselTrack');
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');
            var indicatorsContainer = document.getElementById('carouselIndicators');
            var indicators = [];
            var autoPlayInterval;
            var totalSlides = 4;

            indicatorsContainer.innerHTML = '';

            for (var i = 0; i < totalSlides; i++) {
                var indicator = document.createElement('div');
                indicator.className = 'carousel-indicator';
                if (i === 0) {
                    indicator.classList.add('active');
                }
                indicator.setAttribute('data-slide', i);
                indicator.addEventListener('click', function () {
                    goToSlide(parseInt(this.getAttribute('data-slide')));
                });
                indicatorsContainer.appendChild(indicator);
                indicators.push(indicator);
            }

            function updateCarousel() {
                var translateX = -currentSlide * 100;
                carouselTrack.style.transform = 'translateX(' + translateX + '%)';

                for (var i = 0; i < indicators.length; i++) {
                    indicators[i].classList.remove('active');
                }
                indicators[currentSlide].classList.add('active');
            }

            function goToSlide(slideIndex) {
                if (slideIndex >= 0 && slideIndex < totalSlides) {
                    currentSlide = slideIndex;
                    updateCarousel();
                }
            }

            function nextSlide() {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }

            function prevSlide() {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateCarousel();
            }

            function startAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                }
                autoPlayInterval = setInterval(nextSlide, 5000);
            }

            function stopAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                    autoPlayInterval = null;
                }
            }

            if (prevBtn) {
                prevBtn.addEventListener('click', prevSlide);
            }
            if (nextBtn) {
                nextBtn.addEventListener('click', nextSlide);
            }

            var carouselWrapper = document.querySelector('.carousel-wrapper');
            if (carouselWrapper) {
                carouselWrapper.addEventListener('mouseenter', stopAutoPlay);
                carouselWrapper.addEventListener('mouseleave', startAutoPlay);

                var touchStartX = 0;
                carouselWrapper.addEventListener('touchstart', function (e) {
                    touchStartX = e.touches[0].clientX;
                });
                carouselWrapper.addEventListener('touchend', function (e) {
                    var touchEndX = e.changedTouches[0].clientX;
                    var diff = touchStartX - touchEndX;
                    if (Math.abs(diff) > 50) {
                        if (diff > 0) {
                            nextSlide();
                        } else {
                            prevSlide();
                        }
                    }
                });
            }

            updateCarousel();
            startAutoPlay();
        })();
    </script>

    <!-- Mobile Carousel-->
    <script>
        (function () {
            var currentSlide = 0;
            var carouselTrack = document.getElementById('carouselTrack');
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');
            var indicatorsContainer = document.getElementById('carouselIndicators');
            var indicators = [];
            var autoPlayInterval;

            // Card data - total 12 cards in 4 slides, 3 cards each
            var allCatCards = [
                // Slide 1
                [
                    { name: 'Adolfina', age: '1 ano', gender: 'Feminino', breed: 'Europeu Comum', image: './assets/img/Adolfina1.png' },
                    { name: 'Baunilha', age: '2 anos', gender: 'Masculino', breed: 'Europeu Comum', image: './assets/img/Baunilha.png' },
                    { name: 'Brownie', age: '2 anos', gender: 'Masculino', breed: 'Siamês', image: './assets/img/Brownie.png' }
                ],
                // Slide 2
                [
                    { name: 'Daisy', age: '1 ano', gender: 'Feminino', breed: 'Pelo Longo', image: './assets/img/Daisy.png' },
                    { name: 'Flash', age: '3 anos', gender: 'Masculino', breed: 'Pelo Longo', image: './assets/img/Flash.jpg' },
                    { name: 'Gaio', age: '2 anos', gender: 'Masculino', breed: 'Chartreux', image: './assets/img/Gaio.jpg' }
                ],
                // Slide 3
                [
                    { name: 'Gafanhoto', age: '1 ano', gender: 'Masculino', breed: 'Europeu Comum', image: './assets/img/Gafanhoto.jpg' },
                    { name: 'Harley Quinn', age: '10 anos', gender: 'Feminino', breed: 'Calico', image: './assets/img/Harley Quinn.jpg' },
                    { name: 'Isa', age: '10 meses', gender: 'Feminino', breed: 'Europeu Comum', image: './assets/img/Isa.jpg' }
                ],
                // Slide 4
                [
                    { name: 'Jubileu', age: '5 anos', gender: 'Masculino', breed: 'Europeu Comum', image: './assets/img/Jubileu.jpg' },
                    { name: 'Judy', age: '10 anos', gender: 'Feminino', breed: 'Europeu Comum', image: './assets/img/Judy.jpg' },
                    { name: 'Kika', age: '1 ano', gender: 'Feminino', breed: 'Pelo Longo', image: './assets/img/Kika.jpg' }
                ]
            ];

            // Function to determine number of cards per slide
            function getCardsPerSlide() {
                var screenWidth = window.innerWidth;
                if (screenWidth >= 1024) {
                    return 3; // 3 cards per row for large screens
                } else {
                    return 1; // 1 card for mobile and tablets
                }
            }

            // Function to create card HTML
            function createCatCard(cat) {
                return `
            <div class="cat-preview-card">
                <img src="${cat.image}" alt="${cat.name}" loading="lazy">
                <div class="cat-preview-info">
                    <h3>${cat.name}</h3>
                    <p>${cat.age} • ${cat.gender} • ${cat.breed}</p>
                    <span class="cat-preview-status">Disponível</span>
                </div>
            </div>
        `;
            }

            // Function to rebuild the carousel
            function rebuildCarousel() {
                var cardsPerSlide = getCardsPerSlide();
                var allCats = allCatCards.flat(); // Flatten 2D array to 1D
                var totalSlides;
                var slidesHTML = '';

                if (cardsPerSlide === 1) {
                    // For mobile: each card = separate slide
                    totalSlides = allCats.length;
                    allCats.forEach(function (cat) {
                        slidesHTML += `
                    <div class="carousel-slide">
                        ${createCatCard(cat)}
                    </div>
                `;
                    });
                } else {
                    // For large screens: 3 cards per slide
                    totalSlides = allCatCards.length;
                    allCatCards.forEach(function (slideData) {
                        var slideCardsHTML = '';
                        slideData.forEach(function (cat) {
                            slideCardsHTML += createCatCard(cat);
                        });
                        slidesHTML += `
                    <div class="carousel-slide">
                        ${slideCardsHTML}
                    </div>
                `;
                    });
                }

                // Update carousel HTML
                carouselTrack.innerHTML = slidesHTML;

                // Recreate indicators
                createIndicators(totalSlides);

                // Reset current slide
                currentSlide = 0;
                updateCarousel();

                return totalSlides;
            }

            // Function to create indicators
            function createIndicators(totalSlides) {
                indicatorsContainer.innerHTML = '';
                indicators = [];

                for (var i = 0; i < totalSlides; i++) {
                    var indicator = document.createElement('div');
                    indicator.className = 'carousel-indicator';
                    if (i === 0) {
                        indicator.classList.add('active');
                    }
                    indicator.setAttribute('data-slide', i);
                    indicator.addEventListener('click', function () {
                        goToSlide(parseInt(this.getAttribute('data-slide')));
                    });
                    indicatorsContainer.appendChild(indicator);
                    indicators.push(indicator);
                }
            }

            // Function to update carousel position
            function updateCarousel() {
                var translateX = -currentSlide * 100;
                carouselTrack.style.transform = 'translateX(' + translateX + '%)';

                for (var i = 0; i < indicators.length; i++) {
                    indicators[i].classList.remove('active');
                }
                if (indicators[currentSlide]) {
                    indicators[currentSlide].classList.add('active');
                }
            }

            // Function to go to a specific slide
            function goToSlide(slideIndex) {
                var totalSlides = indicators.length;
                if (slideIndex >= 0 && slideIndex < totalSlides) {
                    currentSlide = slideIndex;
                    updateCarousel();
                }
            }

            // Function for next slide
            function nextSlide() {
                var totalSlides = indicators.length;
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }

            // Function for previous slide
            function prevSlide() {
                var totalSlides = indicators.length;
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateCarousel();
            }

            // Autoplay functions
            function startAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                }
                autoPlayInterval = setInterval(nextSlide, 5000);
            }

            function stopAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                    autoPlayInterval = null;
                }
            }

            // Event listeners
            if (prevBtn) {
                prevBtn.addEventListener('click', function () {
                    stopAutoPlay();
                    prevSlide();
                    startAutoPlay();
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', function () {
                    stopAutoPlay();
                    nextSlide();
                    startAutoPlay();
                });
            }

            // Stop autoplay on interaction
            var carouselWrapper = document.querySelector('.carousel-wrapper');
            if (carouselWrapper) {
                carouselWrapper.addEventListener('mouseenter', stopAutoPlay);
                carouselWrapper.addEventListener('mouseleave', startAutoPlay);

                // Touch events for mobile
                var touchStartX = 0;
                carouselWrapper.addEventListener('touchstart', function (e) {
                    touchStartX = e.touches[0].clientX;
                    stopAutoPlay();
                });

                carouselWrapper.addEventListener('touchend', function (e) {
                    var touchEndX = e.changedTouches[0].clientX;
                    var diff = touchStartX - touchEndX;
                    if (Math.abs(diff) > 50) {
                        if (diff > 0) {
                            nextSlide();
                        } else {
                            prevSlide();
                        }
                    }
                    startAutoPlay();
                });
            }

            // Initialization function and window resize handling
            function handleResize() {
                rebuildCarousel();
                startAutoPlay();
            }

            // Window resize handler with debounce
            var resizeTimeout;
            window.addEventListener('resize', function () {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(handleResize, 250);
            });

            // Orientation change handler for mobile
            window.addEventListener('orientationchange', function () {
                setTimeout(handleResize, 500);
            });

            // Carousel initialization
            function initCarousel() {
                if (carouselTrack && indicatorsContainer) {
                    rebuildCarousel();
                    startAutoPlay();
                }
            }

            // Start on DOM load
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initCarousel);
            } else {
                initCarousel();
            }

            // Forced initialization after 1 second (in case something didn't work)
            setTimeout(function () {
                if (carouselTrack && !carouselTrack.innerHTML.trim()) {
                    initCarousel();
                }
            }, 1000);
        })();
    </script>

    <!-- Stats card -->
    <script>
        function animateCounters() {
            var counters = document.querySelectorAll('.stat-number');
            for (var i = 0; i < counters.length; i++) {
                var counter = counters[i];
                var target = counter.textContent;
                var isNumber = !isNaN(parseInt(target));

                if (isNumber) {
                    animateCounter(counter, parseInt(target));
                }
            }
        }

        function animateCounter(element, endValue) {
            var startValue = 0;
            var duration = 2000;
            var step = endValue / (duration / 16);
            var current = startValue;

            var timer = setInterval(function () {
                current += step;
                if (current >= endValue) {
                    current = endValue;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current);
            }, 16);
        }

        // Checking element visibility
        function isElementInViewport(el) {
            var rect = el.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

        // Animation of the appearance of elements
        function checkFadeIn() {
            var fadeElements = document.querySelectorAll('.fade-in');
            for (var i = 0; i < fadeElements.length; i++) {
                var element = fadeElements[i];
                if (isElementInViewport(element)) {
                    element.classList.add('visible');
                }
            }
        }

        // Checking the visibility of statistics
        var statsAnimated = false;
        function checkStats() {
            if (statsAnimated) return;

            var statsSection = document.querySelector('.stats');
            if (statsSection && isElementInViewport(statsSection)) {
                setTimeout(function () {
                    animateCounters();
                }, 500);
                statsAnimated = true;
            }
        }

        // Launch on page load
        window.addEventListener('load', function () {
            checkFadeIn();
            checkStats();
        });

        // Launch on scroll
        window.addEventListener('scroll', function () {
            checkFadeIn();
            checkStats();
        });

        // Launch on window resize
        window.addEventListener('resize', function () {
            checkFadeIn();
            checkStats();
        });
    </script>

    <!-- Mobile Nav. menu -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const mobileMenuButton = document.getElementById('mobileMenu');
            const navigationMenu = document.querySelector('.nav-links');
            const navButtons = document.querySelector('.nav-buttons');
            const languageSwitcher = document.querySelector('.language-switcher');

            // Create mobile overlay
            let mobileOverlay = document.querySelector('.mobile-overlay');
            if (!mobileOverlay) {
                mobileOverlay = document.createElement('div');
                mobileOverlay.className = 'mobile-overlay';
                document.body.appendChild(mobileOverlay);
            }

            // Check if elements exist
            if (!mobileMenuButton || !navigationMenu) {
                console.error('Mobile menu elements not found');
                return;
            }

            // Toggle mobile menu
            function toggleMobileMenu(e) {
                e.preventDefault();
                e.stopPropagation();

                const isOpen = navigationMenu.classList.contains('mobile-active');

                if (isOpen) {
                    closeMobileMenu();
                } else {
                    openMobileMenu();
                }
            }

            // Open mobile menu
            function openMobileMenu() {
                // Сначала показываем overlay
                mobileOverlay.style.display = 'block';
                mobileOverlay.classList.add('active');

                // Затем активируем меню
                navigationMenu.classList.add('mobile-active');
                mobileMenuButton.classList.add('active');

                // Show buttons and language switcher on mobile
                if (navButtons) {
                    navButtons.classList.add('mobile-active');
                }
                if (languageSwitcher) {
                    languageSwitcher.classList.add('mobile-active');
                }

                // Prevent background scroll
                document.body.style.overflow = 'hidden';
            }

            // Close mobile menu
            function closeMobileMenu() {
                navigationMenu.classList.remove('mobile-active');
                mobileMenuButton.classList.remove('active');
                mobileOverlay.classList.remove('active');

                // Hide buttons and language switcher
                if (navButtons) {
                    navButtons.classList.remove('mobile-active');
                }
                if (languageSwitcher) {
                    languageSwitcher.classList.remove('mobile-active');
                }

                // Restore background scroll
                document.body.style.overflow = '';

                // Hide overlay after animation
                setTimeout(() => {
                    if (!mobileOverlay.classList.contains('active')) {
                        mobileOverlay.style.display = 'none';
                    }
                }, 300);
            }

            // Event listeners
            mobileMenuButton.addEventListener('click', toggleMobileMenu);

            // Close menu when clicking on navigation links
            navigationMenu.addEventListener('click', function (e) {
                if (e.target.tagName === 'A') {
                    closeMobileMenu();
                }
            });

            // Close menu when clicking on nav buttons
            if (navButtons) {
                navButtons.addEventListener('click', function (e) {
                    if (e.target.tagName === 'A') {
                        closeMobileMenu();
                    }
                });
            }

            // Close menu when clicking on overlay
            mobileOverlay.addEventListener('click', closeMobileMenu);

            // Close menu on window resize to desktop
            window.addEventListener('resize', function () {
                if (window.innerWidth > 768) {
                    closeMobileMenu();
                }
            });

            // Handle escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && navigationMenu.classList.contains('mobile-active')) {
                    closeMobileMenu();
                }
            });

            // Ensure overlay is properly hidden on page load
            mobileOverlay.style.display = 'none';
        });

        // Navbar scroll effect (keep existing)
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (navbar) {
                if (window.scrollY > 100) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            }
        });
    </script>
</body>

</html>